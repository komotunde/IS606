books.html <- as.data.frame(books.html)
View(books.html)
library(XML)
books.html = htmlTreeParse('https://raw.githubusercontent.com/komotunde/DATA607/master/Homework%204/books.html',
useInternal = TRUE)
books.html <- readHTMLTable(books.html)
books.html <- as.data.frame(books.html)
View(books.html)
books.html = unlist(xpathApply(books.html, '//p', xmlValue))
books.html = htmlTreeParse('https://raw.githubusercontent.com/komotunde/DATA607/master/Homework%204/books.html',
useInternal = TRUE)
books.html = unlist(xpathApply(books.html, '//p', xmlValue))
books.html = htmlTreeParse('https://github.com/komotunde/DATA607/blob/master/Homework%204/books.html',
useInternal = TRUE)
books.html = htmlTreeParse('https://raw.githubusercontent.com/datafeelings/data607/master/week_7/books.html',
books.html = htmlTreeParse('https://raw.githubusercontent.com/komotunde/DATA607/master/Homework%204/books.html',
library(XML)
books.html = htmlTreeParse('https://raw.githubusercontent.com/komotunde/DATA607/master/Homework%204/books.html',
useInternal = TRUE)
books.html = unlist(xpathApply(books.html, '//p', xmlValue))
books.html = htmlTreeParse('https://raw.githubusercontent.com/komotunde/DATA607/master/Homework%204/books.html',
useInternal = TRUE)
books.html = htmlTreeParse('https://raw.githubusercontent.com/komotunde/DATA607/master/Homework%204/books.html',
books.html = unlist(xpathApply(books.html, '//p', xmlValue))
books.html
books.html = unlist(xpathApply(books.html, xmlValue))
books.xml <- xmlParse('https://raw.githubusercontent.com/komotunde/DATA607/master/Homework%204/books.xml')
books.html <- readHTMLTable('https://raw.githubusercontent.com/komotunde/DATA607/master/Homework%204/books.html', head =  TRUE, stringAsFactors = FALSE)
books.html <-'https://raw.githubusercontent.com/komotunde/DATA607/master/Homework%204/books.html'
download.file(books.html)
library(XML)
library(RCurl)
books.html <-"https://raw.githubusercontent.com/komotunde/DATA607/master/Homework%204/books.html"
books.html <- getURL(books.html)
books.html <- readHTMLTable(books.html, header = TRUE)
View(books.html)
class(books.html)
books.html <- as.data.frame(books.html)
View(books.html)
colnames(books.html) <- c("TITLE", "AUTHOR", "YEAR", "PAGES", "RATING")
View(books.html)
books.xml <- xmlParse("https://raw.githubusercontent.com/komotunde/DATA607/master/Homework%204/books.xml")
books.xml <- xmlParse("http://raw.githubusercontent.com/komotunde/DATA607/master/Homework%204/books.xml")
books.xml<- getURL("https://raw.githubusercontent.com/komotunde/DATA607/master/Homework%204/books.xml", ssl.verifyPeer=FALSE)
books.xml <- xmlTreeParse(books.xml,useInternal = TRUE)
books.xml <- xmlToDataFrame(books.xml)
View(books.xml)
install.packages("jsonlite")
library(jsonlite)
books.json <- getURL("https://raw.githubusercontent.com/komotunde/DATA607/master/Homework%204/books.json")
books.json <- readLines(books.json)
books.json <- as.data.frame(books.json)
View(books.json)
install.packages("rjson")
library(rjson)
books.json <- "https://raw.githubusercontent.com/komotunde/DATA607/master/Homework%204/books.json"
books.json <- fromJSON(paste(readLines(books.json), collapse=""))
books.json <- "https://raw.githubusercontent.com/komotunde/DATA607/master/Homework%204/books.json"
books.json <- fromJSON(paste(readLines(books.json), collapse=""))
books.json
books.json
library(rjson)
books.json <- "https://raw.githubusercontent.com/komotunde/DATA607/master/Homework%204/books.json"
books.json <- fromJSON(paste(readLines(books.json), collapse=""))
books.json <- as.data.frame(books.json)
View(books.json)
require(IS606)
startLab
startLab(Lab6)
getLabs(Lab6)
getLabs()
startLab("Lab6")
startLab("Lab6")
require(IS606)
startLab("Lab6")
gwd
getwd()
setwd("C:/Users/OluwakemiOmotunde/Desktop/MSDA/DATA606/Labs/Lab6")
require(IS606)
startLab("Lab6")
load("~/Lab6/more/atheism.RData")
load("more/atheism.RData")
load("more/atheism.RData")
View(atheism)
us12 <- subset(atheism, nationality == "United States" & year == "2012")
Veiw(us12)
Veiw(us12)
?View
View(us12)
```{r success failure}
p <- .05
n <- 1002
success <- p*n
success
failure <- 1-(p*n)
failure
```
p <- .05
n <- 1002
success <- p*n
success
failure <- (1-p)*n
failure
success = "atheist")
inference(us12$response, est = "proportion", type = "ci", method = "theoretical",
success = "atheist")
nrows(us12)
nrow(us12)
us12 <- subset(atheism, nationality == "United States" & year == "2012")
View(us12)
nrow(us12)
us12.atheist <- subset(us12, response == "atheist" )
nrow(us12.atheist)
us12.nonatheist <- subset(us12, response == "non-atheist")
nrow(us12.nonatheist)
p.atheist <- nrow(us12.atheist)/nrow(us12)
p.atheist
zstar <- 1.96
n <- 1002
SE <- .0069
ME <- (zstar*SE)/(sqrt(n))
ME
zstar <- 1.96
SE <- .0069
ME <- zstar*ME
ME
zstar <- 1.96
SE <- .0069
ME <- zstar*SE
ME
nigeria05 <- subset(atheism, nationality == "Nigeria" & year == "2012")
inference(nigeria05$response, est = "proportion", type = "ci", method = "theoretical",
success = "atheist")
ME <- 1.96*.003
ME
nigeria12 <- subset(atheism, nationality == "Nigeria" & year == "2012")
inference(nigeria12$response, est = "proportion", type = "ci", method = "theoretical",
success = "atheist")
ME <- 1.96*.003
ME
#t
spain2012 <- subset(atheism, nationality == "Spain" & year == "2012")
inference(spain2012$response, est = "proportion", type = "ci", method = "theoretical",
success = "atheist")
spain2012 <- subset(atheism, nationality == "Spain" & year == "2012")
inference(spain2012$response, est = "proportion", type = "ci", method = "theoretical",
success = "atheist")
ME <- 1.96*.0085
ME
n <- 1000
p <- seq(0, 1, 0.01)
me <- 2 * sqrt(p * (1 - p)/n)
plot(me ~ p, ylab = "Margin of Error", xlab = "Population Proportion")
p <- 0.1
n <- 1040
p_hats <- rep(0, 5000)
for(i in 1:5000){
samp <- sample(c("atheist", "non_atheist"), n, replace = TRUE, prob = c(p, 1-p))
p_hats[i] <- sum(samp == "atheist")/n
}
hist(p_hats, main = "p = 0.1, n = 1040", xlim = c(0, 0.18))
p <- 0.1
n <- 400
p_hats400 <- rep(0, 5000)
for(i in 1:5000){
samp <- sample(c("atheist", "non_atheist"), n, replace = TRUE, prob = c(p, 1-p))
p_hats400[i] <- sum(samp == "atheist")/n
}
p <- 0.02
n <- 400
phats400.2 <- rep(0, 5000)
for(i in 1:5000){
samp <- sample(c("atheist", "non_atheist"), n, replace = TRUE, prob = c(p, 1-p))
phats400.2[i] <- sum(samp == "atheist")/n
}
p <- 0.02
n <- 1040
p_hats <- rep(0, 5000)
for(i in 1:5000){
samp <- sample(c("atheist", "non_atheist"), n, replace = TRUE, prob = c(p, 1-p))
p_hats[i] <- sum(samp == "atheist")/n
}
par(mfrow = c(2, 2))
hist(p_hats, main = "p = 0.02, n = 1040", xlim = c(0, 0.18))
hist(p_hats, main = "p = 0.1, n = 1040", xlim = c(0, 0.18))
hist(p_hats400, main = "p = 0.1, n = 400", xlim = c(0, 0.18))
hist(phats400.2, main = "p = 0.02, n = 400", xlim = c(0, 0.18))
p <- 0.1
n <- 400
p_hats400 <- rep(0, 5000)
for(i in 1:5000){
samp <- sample(c("atheist", "non_atheist"), n, replace = TRUE, prob = c(p, 1-p))
p_hats400[i] <- sum(samp == "atheist")/n
}
p <- 0.02
n <- 400
phats400.2 <- rep(0, 5000)
for(i in 1:5000){
samp <- sample(c("atheist", "non_atheist"), n, replace = TRUE, prob = c(p, 1-p))
phats400.2[i] <- sum(samp == "atheist")/n
}
p <- 0.02
n <- 1040
p_hats1040 <- rep(0, 5000)
for(i in 1:5000){
samp <- sample(c("atheist", "non_atheist"), n, replace = TRUE, prob = c(p, 1-p))
p_hats1040[i] <- sum(samp == "atheist")/n
}
par(mfrow = c(2, 2))
hist(p_hats1040, main = "p = 0.02, n = 1040", xlim = c(0, 0.18))
hist(p_hats, main = "p = 0.1, n = 1040", xlim = c(0, 0.18))
hist(p_hats400, main = "p = 0.1, n = 400", xlim = c(0, 0.18))
hist(phats400.2, main = "p = 0.02, n = 400", xlim = c(0, 0.18))
par(mfrow = c(1, 1))
.02*400
.*1040
.1*1040
View(spain2012)
Veiw(spain2005)
Veiw(spain2005)
View(spain2005)
spain2005 <- subset(atheism, nationality == "Spain" & year == 2005)
View(spain2005)
nrow(spain2005)
nrow(spain2012)
spain2005.atheist <- subset(spain2005, response == "atheist")
nrow(spain2005.atheist)
spain2012.atheist <- subset(spain2012, response == "atheist")
nrow(spain2012.atheist)
p.05 <- .1
p.12 <- .09
p.05*nrow(spain2005)
p.12*nrow(spain2012)
inference(spain2012$response, est = "proportion", type = "ci", method = "theoretical",
success = "atheist")
inference(spain2005$response, est = "proportion", type = "ci", method = "theoretical",
success = "atheist")
inference(spain2012$response, est = "proportion", type = "ci", method = "theoretical",
success = "atheist")
inference(spain2005$response, est = "proportion", type = "ci", method = "theoretical",
success = "atheist")
```{r US change}
#first to create the subset for US 2005 since we've already created one for 2012 above
View(us2012)
us2005 <- subset(atheism, nationality == "United States" & year == 2005)
View(us2005)
#check conditions
nrow(us2005) #1146
nrow(us2012)  #1145
us2005.atheist <- subset(us2005, response == "atheist")
nrow(us2005.atheist) #115
us2012.atheist <- subset(us2012, response == "atheist")
nrow(us2012.atheist) #103
usp.05 <- .01
usp.12 <- .05
usp.05*nrow(us2005) #114.6
usp.12*nrow(us2012) #103.05
#The conditions for success failure are met (success and failure are both above 10) and we already stated above that the observations are independent.
inference(us2012$response, est = "proportion", type = "ci", method = "theoretical",
success = "atheist")
inference(us2005$response, est = "proportion", type = "ci", method = "theoretical",
success = "atheist")
#first to create the subset for US 2005 since we've already created one for 2012 above
#first to create the subset for US 2005 since we've already created one for 2012 above
View(us12)
us2005 <- subset(atheism, nationality == "United States" & year == 2005)
View(us2005)
#check conditions
nrow(us2005) #1146
nrow(us12)  #1145
us2005.atheist <- subset(us2005, response == "atheist")
nrow(us2005.atheist) #115
us12.atheist <- subset(us12, response == "atheist")
nrow(us12.atheist) #103
usp.05 <- .01
usp.12 <- .05
usp.05*nrow(us2005) #114.6
usp.12*nrow(us12) #103.05
#The conditions for success failure are met (success and failure are both above 10) and we already stated above that the observations are independent.
inference(us12$response, est = "proportion", type = "ci", method = "theoretical",
success = "atheist")
inference(us2005$response, est = "proportion", type = "ci", method = "theoretical",
success = "atheist")
#the confidence interval for US 2005 is ( 0.083 , 0.1177 ) and for US 2012 it is ( 0.0734 , 0.1065 ). Since the CI for both years overlap, we can say tha there is not convincing evidence that US saw a change
39*.05
zscore <- 1.96
ME <- .1
P <- .5
N <- zscore^2 * (P*(1-P))/(ME^2)
N
zscore <- 1.96
ME <- .1
P <- .5
N <- zscore^2 * P*1-P/ME^2
N
zscore <- 1.96
ME <- .1
P <- .5
N <- ((zscore^2) * P*(1-P)/ME^2)
N
.5*.5
zscore <- 1.96
ME <- .1
P <- .5
N <- ((zscore^2) * .25/ME^2)
N
setwd("~/R/win-library/3.3/IS606/labs/Lab6")
p_hats
getwd()
load("more/atheism.RData")
View(atheism)
us12 <- subset(atheism, nationality == "United States" & year == "2012")
View(us12)
nrow(us12)
us12.atheist <- subset(us12, response == "atheist" )
nrow(us12.atheist)
us12.nonatheist <- subset(us12, response == "non-atheist")
nrow(us12.nonatheist)
p.atheist <- nrow(us12.atheist)/nrow(us12)
p.atheist
#our calculated proportion is .05 which is what Table 6 stated
p <- .05
n <- 1002
success <- p*n
success
failure <- (1-p)*n
failure
#From this we see that they meet the requirements
inference(us12$response, est = "proportion", type = "ci", method = "theoretical",
success = "atheist")
zstar <- 1.96
SE <- .0069
ME <- zstar*SE
ME
#The margin or error for the estimate is .013524
nigeria12 <- subset(atheism, nationality == "Nigeria" & year == "2012")
inference(nigeria12$response, est = "proportion", type = "ci", method = "theoretical",
success = "atheist")
ME <- 1.96*.003
ME
#the confidence interval is ( 0.0037 , 0.0154 ). The number of success is 10 so it just barely makes the cut off for the minimun number of failures and success needed. The margin of error is 0.00588
spain2012 <- subset(atheism, nationality == "Spain" & year == "2012")
inference(spain2012$response, est = "proportion", type = "ci", method = "theoretical",
success = "atheist")
ME <- 1.96*.0085
ME
#the confidence interval is ( 0.0734 , 0.1065 ). The number of success is greater than 10 as is the number of failures. The margin of error is 0.01666
n <- 1000
p <- seq(0, 1, 0.01)
me <- 2 * sqrt(p * (1 - p)/n)
plot(me ~ p, ylab = "Margin of Error", xlab = "Population Proportion")
p <- 0.1
n <- 1040
p_hats <- rep(0, 5000)
for(i in 1:5000){
samp <- sample(c("atheist", "non_atheist"), n, replace = TRUE, prob = c(p, 1-p))
p_hats[i] <- sum(samp == "atheist")/n
}
hist(p_hats, main = "p = 0.1, n = 1040", xlim = c(0, 0.18))
p <- 0.1
n <- 1040
phats <- rep(0, 5000)
for(i in 1:5000){
samp <- sample(c("atheist", "non_atheist"), n, replace = TRUE, prob = c(p, 1-p))
phats[i] <- sum(samp == "atheist")/n
}
hist(phats, main = "p = 0.1, n = 1040", xlim = c(0, 0.18))
p <- 0.1
n <- 400
p_hats400 <- rep(0, 5000)
for(i in 1:5000){
samp <- sample(c("atheist", "non_atheist"), n, replace = TRUE, prob = c(p, 1-p))
p_hats400[i] <- sum(samp == "atheist")/n
}
p <- 0.02
n <- 400
phats400.2 <- rep(0, 5000)
for(i in 1:5000){
samp <- sample(c("atheist", "non_atheist"), n, replace = TRUE, prob = c(p, 1-p))
phats400.2[i] <- sum(samp == "atheist")/n
}
p <- 0.02
n <- 1040
p_hats1040 <- rep(0, 5000)
for(i in 1:5000){
samp <- sample(c("atheist", "non_atheist"), n, replace = TRUE, prob = c(p, 1-p))
p_hats1040[i] <- sum(samp == "atheist")/n
}
par(mfrow = c(2, 2))
hist(p_hats1040, main = "p = 0.02, n = 1040", xlim = c(0, 0.18))
hist(phats, main = "p = 0.1, n = 1040", xlim = c(0, 0.18))
hist(p_hats400, main = "p = 0.1, n = 400", xlim = c(0, 0.18))
hist(phats400.2, main = "p = 0.02, n = 400", xlim = c(0, 0.18))
#the bigger n's have a closer spread, while the smaller n's have a wider spread but p also gives a closer spread. when n =400 the distribution is centered around p but not when n= 1040
setwd("C:/Users/OluwakemiOmotunde/Desktop/MSDA/DATA606/Labs/Lab6")
hist(phats, main = "p = 0.1, n = 1040", xlim = c(0, 0.18))
# Chunk 1: head-data
load("more/atheism.RData")
View(atheism)
# Chunk 3: success failure
p <- .05
n <- 1002
success <- p*n
success
failure <- (1-p)*n
failure
#From this we see that they meet the requirements
# Chunk 5: ME
zstar <- 1.96
SE <- .0069
ME <- zstar*SE
ME
#The margin or error for the estimate is .013524
# Chunk 6: ci
nigeria12 <- subset(atheism, nationality == "Nigeria" & year == "2012")
inference(nigeria12$response, est = "proportion", type = "ci", method = "theoretical",
success = "atheist")
ME <- 1.96*.003
ME
#the confidence interval is ( 0.0037 , 0.0154 ). The number of success is 10 so it just barely makes the cut off for the minimun number of failures and success needed. The margin of error is 0.00588
spain2012 <- subset(atheism, nationality == "Spain" & year == "2012")
inference(spain2012$response, est = "proportion", type = "ci", method = "theoretical",
success = "atheist")
ME <- 1.96*.0085
ME
#the confidence interval is ( 0.0734 , 0.1065 ). The number of success is greater than 10 as is the number of failures. The margin of error is 0.01666
# Chunk 9: n400
p <- 0.1
n <- 400
p_hats400 <- rep(0, 5000)
for(i in 1:5000){
samp <- sample(c("atheist", "non_atheist"), n, replace = TRUE, prob = c(p, 1-p))
p_hats400[i] <- sum(samp == "atheist")/n
}
p <- 0.02
n <- 400
phats400.2 <- rep(0, 5000)
for(i in 1:5000){
samp <- sample(c("atheist", "non_atheist"), n, replace = TRUE, prob = c(p, 1-p))
phats400.2[i] <- sum(samp == "atheist")/n
}
p <- 0.02
n <- 1040
p_hats1040 <- rep(0, 5000)
for(i in 1:5000){
samp <- sample(c("atheist", "non_atheist"), n, replace = TRUE, prob = c(p, 1-p))
p_hats1040[i] <- sum(samp == "atheist")/n
}
par(mfrow = c(2, 2))
hist(p_hats1040, main = "p = 0.02, n = 1040", xlim = c(0, 0.18))
hist(phats, main = "p = 0.1, n = 1040", xlim = c(0, 0.18))
hist(p_hats400, main = "p = 0.1, n = 400", xlim = c(0, 0.18))
hist(phats400.2, main = "p = 0.02, n = 400", xlim = c(0, 0.18))
#the bigger n's have a closer spread, while the smaller n's have a wider spread but p also gives a closer spread. when n =400 the distribution is centered around p but not when n= 1040
# Chunk 10
par(mfrow = c(1, 1))
# Chunk 11: spain compare
#first to create the subset for Spain 2005 since we've already created one for 2012 above
View(spain2012)
spain2005 <- subset(atheism, nationality == "Spain" & year == 2005)
View(spain2005)
#check conditions
nrow(spain2005) #1146
nrow(spain2012)  #1145
spain2005.atheist <- subset(spain2005, response == "atheist")
nrow(spain2005.atheist) 115
spain2012.atheist <- subset(spain2012, response == "atheist")
nrow(spain2012.atheist) #103
p.05 <- .1
p.12 <- .09
p.05*nrow(spain2005) #114.6
p.12*nrow(spain2012) #103.05
#The conditions for success failure are met (success and failure are both above 10) and we already stated above that the observations are independent.
inference(spain2012$response, est = "proportion", type = "ci", method = "theoretical",
success = "atheist")
inference(spain2005$response, est = "proportion", type = "ci", method = "theoretical",
success = "atheist")
#the confidence interval for Spain 2005 is ( 0.083 , 0.1177 ) and for Spain 2012 it is ( 0.0734 , 0.1065 ). Since the CI for both years overlap, we can say tha there is not convincing evidence that Spain saw a change in atheism rates
# Chunk 12: US change
#first to create the subset for US 2005 since we've already created one for 2012 above
View(us12)
us2005 <- subset(atheism, nationality == "United States" & year == 2005)
View(us2005)
#check conditions
nrow(us2005) #1002
nrow(us12)  #1002
us2005.atheist <- subset(us2005, response == "atheist")
nrow(us2005.atheist) #10
us12.atheist <- subset(us12, response == "atheist")
nrow(us12.atheist) #50
usp.05 <- .01
usp.12 <- .05
usp.05*nrow(us2005) #10.02
usp.12*nrow(us12) # 50.1
#The conditions for success failure are met (success and failure are both greater than or equal 10) and we already stated above that the observations are independent.
inference(us12$response, est = "proportion", type = "ci", method = "theoretical",
success = "atheist")
inference(us2005$response, est = "proportion", type = "ci", method = "theoretical",
success = "atheist")
#the confidence interval for US 2005 is ( 0.0038 , 0.0161 ) and for US 2012 it is ( 0.0364 , 0.0634 ). Since the CI for both years do not overlap, we can say that there is  convincing evidence that US saw a change in atheism rates
# Chunk 13: sample size
zscore <- 1.96
ME <- .1
P <- .5
N <- ((zscore^2) * .25/ME^2)
N
#We would need a sample size of 96.04 (97)
us12
us12 <- subset(atheism, nationality == "United States" & year == 2012)
View(us12)
us2005 <- subset(atheism, nationality == "United States" & year == 2005)
View(us2005)
